{"version":3,"sources":["../../src/Controller/IndexController.js"],"names":["CrawlService","SitemapService","Logger","Args","IndexController","constructor","args","logger","start","callback","event","progress","Promise","resolve","reject","output","doesFolderExist","isCrawl","isSingle","crawlService","on","report","toLog","verbose","console","log","toString","sitemapService"],"mappings":"AACA,OAAOA,YAAP,MAAyB,4BAAzB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AAEA,eAAe,MAAMC,eAAN,CAAsB;AAIjCC,EAAAA,WAAW,CAACC,IAAD,EAAa;AACpB,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAc,IAAIL,MAAJ,CAAWI,IAAX,CAAd;AACH;;AAEDE,EAAAA,KAAK,CAACC,QAAkB,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB,CAC/C,CADI,EACa;AACd,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,WAAKR,IAAL,CAAUS,MAAV,CAAiBC,eAAjB;;AACA,UAAI,KAAKV,IAAL,CAAUW,OAAV,MAAuB,KAAKX,IAAL,CAAUY,QAAV,EAA3B,EAAiD;AAC7C,YAAIC,YAAY,GAAG,IAAInB,YAAJ,CAAiB,KAAKM,IAAtB,CAAnB;AACAa,QAAAA,YAAY,CACPC,EADL,CACQ,UADR,EACoBT,QAAQ,IAAI;AACxBF,UAAAA,QAAQ,CAAC,UAAD,EAAaE,QAAb,CAAR;AACA,eAAKJ,MAAL,CAAYc,MAAZ,CAAmBV,QAAQ,CAACW,KAAT,EAAnB;;AACA,cAAI,KAAKhB,IAAL,CAAUiB,OAAd,EAAuB;AACnBC,YAAAA,OAAO,CAACC,GAAR,CAAYd,QAAQ,CAACe,QAAT,EAAZ;AACH;AACJ,SAPL,EAQKN,EARL,CAQQ,UARR,EAQoB,MAAM;AAClBX,UAAAA,QAAQ,CAAC,UAAD,CAAR;;AACA,cAAI,KAAKH,IAAL,CAAUiB,OAAd,EAAuB;AACnBC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH;;AACDZ,UAAAA,OAAO;AACV,SAdL;AAeAM,QAAAA,YAAY,CAACX,KAAb;AACH,OAlBD,MAkBO;AACH,YAAImB,cAAc,GAAG,IAAI1B,cAAJ,CAAmB,KAAKK,IAAxB,CAArB;AACAqB,QAAAA,cAAc,CACTP,EADL,CACQ,UADR,EACoBT,QAAQ,IAAI;AACxBF,UAAAA,QAAQ,CAAC,UAAD,EAAaE,QAAb,CAAR;AACA,eAAKJ,MAAL,CAAYc,MAAZ,CAAmBV,QAAQ,CAACW,KAAT,EAAnB;;AACA,cAAI,KAAKhB,IAAL,CAAUiB,OAAd,EAAuB;AACnBC,YAAAA,OAAO,CAACC,GAAR,CAAYd,QAAQ,CAACe,QAAT,EAAZ;AACH;AACJ,SAPL,EAQKN,EARL,CAQQ,UARR,EAQoB,MAAM;AAClBX,UAAAA,QAAQ,CAAC,UAAD,CAAR;;AACA,cAAI,KAAKH,IAAL,CAAUiB,OAAd,EAAuB;AACnBC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH;;AACDZ,UAAAA,OAAO;AACV,SAdL;AAeAc,QAAAA,cAAc,CAACnB,KAAf;AACH;AACJ,KAvCM,CAAP;AAwCH;;AAnDgC","sourcesContent":["// @flow\nimport CrawlService from '../Service/CrawlService.js';\nimport SitemapService from '../Service/SitemapService.js';\n\nimport Logger from '../Utility/Logger.js';\nimport Args from '../Model/Args.js';\n\nexport default class IndexController {\n    args: Args;\n    logger: Logger;\n\n    constructor(args: Args) {\n        this.args = args;\n        this.logger = new Logger(args);\n    }\n\n    start(callback: function = (event, progress) => {\n    }): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.args.output.doesFolderExist();\n            if (this.args.isCrawl() || this.args.isSingle()) {\n                let crawlService = new CrawlService(this.args);\n                crawlService\n                    .on('progress', progress => {\n                        callback('progress', progress);\n                        this.logger.report(progress.toLog());\n                        if (this.args.verbose) {\n                            console.log(progress.toString());\n                        }\n                    })\n                    .on('complete', () => {\n                        callback('complete');\n                        if (this.args.verbose) {\n                            console.log('Done');\n                        }\n                        resolve();\n                    });\n                crawlService.start();\n            } else {\n                let sitemapService = new SitemapService(this.args);\n                sitemapService\n                    .on('progress', progress => {\n                        callback('progress', progress);\n                        this.logger.report(progress.toLog());\n                        if (this.args.verbose) {\n                            console.log(progress.toString());\n                        }\n                    })\n                    .on('complete', () => {\n                        callback('complete');\n                        if (this.args.verbose) {\n                            console.log('Done');\n                        }\n                        resolve();\n                    });\n                sitemapService.start();\n            }\n        });\n    }\n}\n"],"file":"IndexController.js"}