{"version":3,"sources":["../../src/Controller/IndexController.js"],"names":["IndexController","constructor","args","logger","Logger","start","callback","event","progress","Promise","resolve","reject","output","doesFolderExist","isCrawl","isSingle","crawlService","CrawlService","on","report","toLog","verbose","console","log","toString","sitemapService","SitemapService"],"mappings":"6FACA,6EACA,iFAEA,iEACA,2D,kFAEe,KAAMA,CAAAA,eAAgB,CAIjCC,WAAW,CAACC,IAAD,CAAa,CACpB,KAAKA,IAAL,CAAYA,IAAZ,CACA,KAAKC,MAAL,CAAc,GAAIC,gBAAJ,CAAWF,IAAX,CACjB,CAEDG,KAAK,EACa,IADZC,CAAAA,QACY,2DADS,CAACC,KAAD,CAAQC,QAAR,GAAqB,CAC/C,CAAiB,CACd,MAAO,IAAIC,CAAAA,OAAJ,CAAY,CAACC,OAAD,CAAUC,MAAV,GAAqB,CACpC,KAAKT,IAAL,CAAUU,MAAV,CAAiBC,eAAjB,GACA,GAAI,KAAKX,IAAL,CAAUY,OAAV,IAAuB,KAAKZ,IAAL,CAAUa,QAAV,EAA3B,CAAiD,CAC7C,GAAIC,CAAAA,YAAY,CAAG,GAAIC,sBAAJ,CAAiB,KAAKf,IAAtB,CAAnB,CACAc,YAAY,CACPE,EADL,CACQ,UADR,CACoBV,QAAQ,EAAI,CACxBF,QAAQ,CAAC,UAAD,CAAaE,QAAb,CAAR,CACA,KAAKL,MAAL,CAAYgB,MAAZ,CAAmBX,QAAQ,CAACY,KAAT,EAAnB,EACA,GAAI,KAAKlB,IAAL,CAAUmB,OAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAYf,QAAQ,CAACgB,QAAT,EAAZ,CACH,CACJ,CAPL,EAQKN,EARL,CAQQ,UARR,CAQoB,IAAM,CAClBZ,QAAQ,CAAC,UAAD,CAAR,CACA,GAAI,KAAKJ,IAAL,CAAUmB,OAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAY,MAAZ,CACH,CACDb,OAAO,EACV,CAdL,EAeAM,YAAY,CAACX,KAAb,EACH,CAlBD,IAkBO,CACH,GAAIoB,CAAAA,cAAc,CAAG,GAAIC,wBAAJ,CAAmB,KAAKxB,IAAxB,CAArB,CACAuB,cAAc,CACTP,EADL,CACQ,UADR,CACoBV,QAAQ,EAAI,CACxBF,QAAQ,CAAC,UAAD,CAAaE,QAAb,CAAR,CACA,KAAKL,MAAL,CAAYgB,MAAZ,CAAmBX,QAAQ,CAACY,KAAT,EAAnB,EACA,GAAI,KAAKlB,IAAL,CAAUmB,OAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAYf,QAAQ,CAACgB,QAAT,EAAZ,CACH,CACJ,CAPL,EAQKN,EARL,CAQQ,UARR,CAQoB,IAAM,CAClBZ,QAAQ,CAAC,UAAD,CAAR,CACA,GAAI,KAAKJ,IAAL,CAAUmB,OAAd,CAAuB,CACnBC,OAAO,CAACC,GAAR,CAAY,MAAZ,CACH,CACDb,OAAO,EACV,CAdL,EAeAe,cAAc,CAACpB,KAAf,EACH,CACJ,CAvCM,CAwCV,CAnDgC,C","sourcesContent":["// @flow\r\nimport CrawlService from '../Service/CrawlService';\r\nimport SitemapService from '../Service/SitemapService';\r\n\r\nimport Logger from '../Utility/Logger';\r\nimport Args from '../Model/Args';\r\n\r\nexport default class IndexController {\r\n    args: Args;\r\n    logger: Logger;\r\n\r\n    constructor(args: Args) {\r\n        this.args = args;\r\n        this.logger = new Logger(args);\r\n    }\r\n\r\n    start(callback: function = (event, progress) => {\r\n    }): Promise<void> {\r\n        return new Promise((resolve, reject) => {\r\n            this.args.output.doesFolderExist();\r\n            if (this.args.isCrawl() || this.args.isSingle()) {\r\n                let crawlService = new CrawlService(this.args);\r\n                crawlService\r\n                    .on('progress', progress => {\r\n                        callback('progress', progress);\r\n                        this.logger.report(progress.toLog());\r\n                        if (this.args.verbose) {\r\n                            console.log(progress.toString());\r\n                        }\r\n                    })\r\n                    .on('complete', () => {\r\n                        callback('complete');\r\n                        if (this.args.verbose) {\r\n                            console.log('Done');\r\n                        }\r\n                        resolve();\r\n                    });\r\n                crawlService.start();\r\n            } else {\r\n                let sitemapService = new SitemapService(this.args);\r\n                sitemapService\r\n                    .on('progress', progress => {\r\n                        callback('progress', progress);\r\n                        this.logger.report(progress.toLog());\r\n                        if (this.args.verbose) {\r\n                            console.log(progress.toString());\r\n                        }\r\n                    })\r\n                    .on('complete', () => {\r\n                        callback('complete');\r\n                        if (this.args.verbose) {\r\n                            console.log('Done');\r\n                        }\r\n                        resolve();\r\n                    });\r\n                sitemapService.start();\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"file":"IndexController.js"}