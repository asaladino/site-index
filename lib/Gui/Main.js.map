{"version":3,"sources":["../../src/Gui/Main.js"],"names":["Gtk","Window","startGui","args","gi","require","Label","Entry","Grid","Switch","ProgressBar","Button","Box","FileChooserButton","startLoop","init","window","title","window_position","WindowPosition","CENTER","on","mainQuit","setWmclass","setDefaultSize","grid","attach","label","halign","domainEntry","text","domain","hexpand","fileChooserButton","setAction","setCurrentFolder","output","filename","headersSwitch","active","headers","headersSwitchBox","add","progressBar","fraction","startButton","startButtonBox","getText","FileDetails","getCurrentFolder","getState","indexController","IndexController","setSensitive","setLabel","start","event","progress","percentComplete","urls","urlsPool","setFraction","then","catch","showAll","main","propTypes","PropTypes","object","func"],"mappings":"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","sourcesContent":["// noinspection ES6CheckImport\nimport PropTypes from 'prop-types';\nimport gi from 'node-gtk';\nimport IndexController from \"../Controller/IndexController\";\nimport Args from \"../Model/Args\";\nimport FileDetails from \"../Model/FileDetails\";\n\nlet Gtk = {};\nlet Window = {};\n\nconst startGui = (args: Args) => {\n    Gtk = gi.require('Gtk', '3.0');\n    const {Window, Label, Entry, Grid, Switch, ProgressBar, Button, Box, FileChooserButton} = Gtk;\n\n    gi.startLoop();\n    Gtk.init();\n\n    const window = new Window({\n        title: 'Site Index',\n        window_position: Gtk.WindowPosition.CENTER\n    });\n    window.on('destroy', () => Gtk.mainQuit());\n    window.on('delete-event', () => false);\n\n    window.setWmclass('Site Index', 'Site Index');\n    window.setDefaultSize(400, 100);\n    const grid = new Grid({\n        'column-spacing': 5,\n        'row-spacing': 5,\n        'margin_left': 5,\n        'margin_right': 5,\n        'margin_top': 5,\n        'margin_bottom': 5\n    });\n    grid.attach(new Label({label: `Domain`, halign: 1}), 0, 0, 1, 1);\n    const domainEntry = new Entry({text: args.domain, hexpand: true});\n    grid.attach(domainEntry, 1, 0, 1, 1);\n\n    grid.attach(new Label({label: `Output`, halign: 1}), 0, 1, 1, 1);\n    const fileChooserButton = new FileChooserButton();\n    fileChooserButton.setAction(2);\n    fileChooserButton.setCurrentFolder(args.output.filename);\n    grid.attach(fileChooserButton, 1, 1, 1, 1);\n\n    grid.attach(new Label({label: `Headers`, halign: 1}), 0, 2, 1, 1);\n    const headersSwitch = new Switch({active: args.headers});\n    const headersSwitchBox = new Box();\n    headersSwitchBox.add(headersSwitch);\n    grid.attach(headersSwitchBox, 1, 2, 1, 1);\n\n    const progressBar = new ProgressBar({fraction: 0.0});\n    grid.attach(progressBar, 0, 3, 2, 1);\n\n    const startButton = new Button({label: 'Start Index', halign: 2});\n    const startButtonBox = new Box({halign: 2});\n    startButtonBox.add(startButton);\n    grid.attach(startButtonBox, 1, 4, 1, 1);\n\n    startButton.on('clicked', () => {\n        args.domain = domainEntry.getText();\n        args.output = new FileDetails(fileChooserButton.getCurrentFolder());\n        args.headers = headersSwitch.getState();\n\n        let indexController = new IndexController(args);\n        startButton.setSensitive(false);\n        startButton.setLabel(\"Indexing Site...\");\n        indexController.start((event, progress) => {\n            if(event === 'progress') {\n                const percentComplete = progress.urls / (progress.urlsPool + progress.urls);\n                progressBar.setFraction(percentComplete);\n            }\n        }).then(() => {\n            startButton.setSensitive(true);\n            startButton.setLabel(\"Start Index\");\n        }).catch(() => {\n            startButton.setSensitive(true);\n            startButton.setLabel(\"Start Index\");\n        });\n    });\n\n    window.add(grid);\n\n    window.showAll();\n    Gtk.main();\n};\n\nGtk.propTypes = {\n    WindowPosition: {\n        CENTER: PropTypes.object\n    },\n    Grid: {\n        attach: PropTypes.func\n    },\n    FileChooserButton: {\n        getCurrentFolder: PropTypes.func,\n        setCurrentFolder: PropTypes.func,\n        setAction: PropTypes.func\n    },\n    Entry: {\n        getText: PropTypes.func\n    },\n    ProgressBar: {\n        setFraction: PropTypes.func\n    },\n    Button: {\n        setSensitive: PropTypes.func,\n        setLabel: PropTypes.func\n    }\n};\n\nWindow.propTypes = {\n    setWmclass: PropTypes.func,\n    setDefaultSize: PropTypes.func,\n    showAll: PropTypes.func\n};\n\nexport default startGui;\n"],"file":"Main.js"}