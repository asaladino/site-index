{"version":3,"sources":["../../src/Gui/Main.js"],"names":["Gtk","gi","require","Window","Label","Entry","Grid","Switch","ProgressBar","Button","startGui","args","startLoop","init","window","title","window_position","WindowPosition","CENTER","on","mainQuit","setWmclass","setDefaultSize","grid","attach","label","text","domain","output","filename","active","headers","progressBar","fraction","startButton","indexController","IndexController","setSensitive","setLabel","start","event","progress","percentComplete","urls","urlsPool","setFraction","then","catch","add","showAll","main","propTypes","PropTypes","object","func"],"mappings":"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","sourcesContent":["// noinspection ES6CheckImport\nimport PropTypes from 'prop-types';\nimport gi from 'node-gtk';\nimport IndexController from \"../Controller/IndexController\";\n\nconst Gtk = gi.require('Gtk', '3.0');\nconst {Window, Label, Entry, Grid, Switch, ProgressBar, Button} = Gtk;\n\nconst startGui = (args) => {\n    gi.startLoop();\n    Gtk.init();\n\n    const window = new Window({\n        title: 'Site Index',\n        window_position: Gtk.WindowPosition.CENTER\n    });\n    window.on('destroy', () => Gtk.mainQuit());\n    window.on('delete-event', () => false);\n\n    window.setWmclass('Site Index', 'Site Index');\n    window.setDefaultSize(200, 80);\n    const grid = new Grid();\n    grid.attach(new Label({label: `Domain`}), 0, 0, 1, 1);\n    grid.attach(new Entry({text: args.domain}), 1, 0, 1, 1);\n\n    grid.attach(new Label({label: `Output`}), 0, 1, 1, 1);\n    grid.attach(new Entry({text: args.output.filename}), 1, 1, 1, 1);\n\n    grid.attach(new Label({label: `Headers`}), 0, 2, 1, 1);\n    grid.attach(new Switch({active: args.headers}), 1, 2, 1, 1);\n\n    const progressBar = new ProgressBar({fraction: 0.0});\n    grid.attach(progressBar, 0, 3, 2, 1);\n\n    const startButton = new Button({label: 'Start Index'});\n    grid.attach(startButton, 1, 4, 1, 1);\n\n\n    startButton.on('clicked', () => {\n        let indexController = new IndexController(args);\n        startButton.setSensitive(false);\n        startButton.setLabel(\"Indexing Site...\");\n        indexController.start((event, progress) => {\n            if(event === 'progress') {\n                const percentComplete = progress.urls / (progress.urlsPool + progress.urls);\n                progressBar.setFraction(percentComplete);\n            }\n        }).then(() => {\n            startButton.setSensitive(true);\n            startButton.setLabel(\"Start Index\");\n        }).catch(() => {\n            startButton.setSensitive(true);\n            startButton.setLabel(\"Start Index\");\n        });\n    });\n\n    window.add(grid);\n\n    window.showAll();\n    Gtk.main();\n};\n\nGtk.propTypes = {\n    WindowPosition: {\n        CENTER: PropTypes.object\n    },\n    Grid: {\n        attach: PropTypes.func\n    },\n    ProgressBar: {\n        setFraction: PropTypes.func\n    },\n    Button: {\n        setSensitive: PropTypes.func,\n        setLabel: PropTypes.func\n    }\n};\nWindow.propTypes = {\n    setWmclass: PropTypes.func,\n    setDefaultSize: PropTypes.func,\n    showAll: PropTypes.func\n};\n\nexport default startGui;\n"],"file":"Main.js"}