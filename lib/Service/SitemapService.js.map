{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["SitemapService","Service","start","urlsRepository","JsonUrlsRepository","getPathJsonUrlsFile","sitemapRepository","SitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":";;;;;;;AACA;;AACA;;AACA;;;;AAEA;;;AAGe,MAAMA,cAAN,SAA6BC,gBAA7B,CAAqC;AAChD;;;;AAIAC,EAAAA,KAAK,GAAG;AACJ,QAAIC,cAAc,GAAG,IAAIC,2BAAJ,CAAuB,KAAKC,mBAAL,EAAvB,CAArB;AACA,QAAIC,iBAAiB,GAAG,IAAIC,0BAAJ,CACpB,YAAY,KAAKC,IAAL,CAAUC,MAAtB,GAA+B,cADX,CAAxB;AAGAH,IAAAA,iBAAiB,CACZI,YADL,CACkBC,QAAQ,IAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD9B,EAEKE,IAFL,CAEUC,IAAI,IAAI;AACVX,MAAAA,cAAc,CAACY,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,MAAM,KAAKG,YAAL,EAArC;AACH,KAJL;AAKH;;AAf+C","sourcesContent":["// @flow\nimport Service from \"./Service.js\";\nimport SitemapRepository from \"../Repository/SitemapRepository.js\";\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository.js\";\n\n/**\n * This service will extract all the urls from a sitemap or nested sitemaps.\n */\nexport default class SitemapService extends Service {\n    /**\n     * Start the sitemap service to extract the domain urls from the sitemap.\n     * Assumes the sitemap is located at the domain + /sitemap.xml\n     */\n    start() {\n        let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\n        let sitemapRepository = new SitemapRepository(\n            \"http://\" + this.args.domain + \"/sitemap.xml\"\n        );\n        sitemapRepository\n            .findAllPages(progress => this.emitProgress(progress))\n            .then(urls => {\n                urlsRepository.save(urls).then(() => this.emitComplete());\n            });\n    }\n}\n"],"file":"SitemapService.js"}