{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["SitemapService","Service","start","urlsRepository","JsonUrlsRepository","getPathJsonUrlsFile","sitemapRepository","SitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":";;;;;;;AACA;;AACA;;AACA;;;;AAEA;;;AAGe,MAAMA,cAAN,SAA6BC,gBAA7B,CAAqC;AAClD;;;;AAIAC,EAAAA,KAAK,GAAG;AACN,QAAIC,cAAc,GAAG,IAAIC,2BAAJ,CAAuB,KAAKC,mBAAL,EAAvB,CAArB;AACA,QAAIC,iBAAiB,GAAG,IAAIC,0BAAJ,CACtB,YAAY,KAAKC,IAAL,CAAUC,MAAtB,GAA+B,cADT,CAAxB;AAGAH,IAAAA,iBAAiB,CACdI,YADH,CACgBC,QAAQ,IAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD5B,EAEGE,IAFH,CAEQC,IAAI,IAAI;AACZX,MAAAA,cAAc,CAACY,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,MAAM,KAAKG,YAAL,EAArC;AACD,KAJH;AAKD;;AAfiD","sourcesContent":["// @flow\r\nimport Service from \"./Service\";\r\nimport SitemapRepository from \"../Repository/SitemapRepository\";\r\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository\";\r\n\r\n/**\r\n * This service will extract all the urls from a sitemap or nested sitemaps.\r\n */\r\nexport default class SitemapService extends Service {\r\n  /**\r\n   * Start the sitemap service to extract the domain urls from the sitemap.\r\n   * Assumes the sitemap is located at the domain + /sitemap.xml\r\n   */\r\n  start() {\r\n    let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\r\n    let sitemapRepository = new SitemapRepository(\r\n      \"http://\" + this.args.domain + \"/sitemap.xml\"\r\n    );\r\n    sitemapRepository\r\n      .findAllPages(progress => this.emitProgress(progress))\r\n      .then(urls => {\r\n        urlsRepository.save(urls).then(() => this.emitComplete());\r\n      });\r\n  }\r\n}\r\n"],"file":"SitemapService.js"}