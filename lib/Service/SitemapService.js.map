{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["SitemapService","Service","start","urlsRepository","JsonUrlsRepository","getPathJsonUrlsFile","sitemapRepository","SitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":"6FACA,0DACA,0FACA,4F,kFAEA;;GAGe,KAAMA,CAAAA,cAAN,QAA6BC,iBAAQ,CAChD;;;OAIAC,KAAK,EAAG,CACJ,GAAIC,CAAAA,cAAc,CAAG,GAAIC,4BAAJ,CAAuB,KAAKC,mBAAL,EAAvB,CAArB,CACA,GAAIC,CAAAA,iBAAiB,CAAG,GAAIC,2BAAJ,CACpB,UAAY,KAAKC,IAAL,CAAUC,MAAtB,CAA+B,cADX,CAAxB,CAGAH,iBAAiB,CACZI,YADL,CACkBC,QAAQ,EAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD9B,EAEKE,IAFL,CAEUC,IAAI,EAAI,CACVX,cAAc,CAACY,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,IAAM,KAAKG,YAAL,EAArC,CACH,CAJL,CAKH,CAf+C,C","sourcesContent":["// @flow\nimport Service from \"./Service\";\nimport SitemapRepository from \"../Repository/SitemapRepository\";\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository\";\n\n/**\n * This service will extract all the urls from a sitemap or nested sitemaps.\n */\nexport default class SitemapService extends Service {\n    /**\n     * Start the sitemap service to extract the domain urls from the sitemap.\n     * Assumes the sitemap is located at the domain + /sitemap.xml\n     */\n    start() {\n        let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\n        let sitemapRepository = new SitemapRepository(\n            \"http://\" + this.args.domain + \"/sitemap.xml\"\n        );\n        sitemapRepository\n            .findAllPages(progress => this.emitProgress(progress))\n            .then(urls => {\n                urlsRepository.save(urls).then(() => this.emitComplete());\n            });\n    }\n}\n"],"file":"SitemapService.js"}