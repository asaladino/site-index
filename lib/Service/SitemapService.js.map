{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["SitemapService","Service","start","urlsRepository","JsonUrlsRepository","getPathJsonUrlsFile","sitemapRepository","SitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":"6FACA,0DACA,0FACA,4F,kFAEA;;GAGe,KAAMA,CAAAA,cAAN,QAA6BC,iBAAQ,CAChD;;;OAIAC,KAAK,EAAG,CACJ,GAAIC,CAAAA,cAAc,CAAG,GAAIC,4BAAJ,CAAuB,KAAKC,mBAAL,EAAvB,CAArB,CACA,GAAIC,CAAAA,iBAAiB,CAAG,GAAIC,2BAAJ,CACpB,UAAY,KAAKC,IAAL,CAAUC,MAAtB,CAA+B,cADX,CAAxB,CAGAH,iBAAiB,CACZI,YADL,CACkBC,QAAQ,EAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD9B,EAEKE,IAFL,CAEUC,IAAI,EAAI,CACVX,cAAc,CAACY,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,IAAM,KAAKG,YAAL,EAArC,CACH,CAJL,CAKH,CAf+C,C","sourcesContent":["// @flow\r\nimport Service from \"./Service\";\r\nimport SitemapRepository from \"../Repository/SitemapRepository\";\r\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository\";\r\n\r\n/**\r\n * This service will extract all the urls from a sitemap or nested sitemaps.\r\n */\r\nexport default class SitemapService extends Service {\r\n    /**\r\n     * Start the sitemap service to extract the domain urls from the sitemap.\r\n     * Assumes the sitemap is located at the domain + /sitemap.xml\r\n     */\r\n    start() {\r\n        let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\r\n        let sitemapRepository = new SitemapRepository(\r\n            \"http://\" + this.args.domain + \"/sitemap.xml\"\r\n        );\r\n        sitemapRepository\r\n            .findAllPages(progress => this.emitProgress(progress))\r\n            .then(urls => {\r\n                urlsRepository.save(urls).then(() => this.emitComplete());\r\n            });\r\n    }\r\n}\r\n"],"file":"SitemapService.js"}