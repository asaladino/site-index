{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["Service","SitemapRepository","JsonUrlsRepository","SitemapService","start","urlsRepository","getPathJsonUrlsFile","sitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":"AACA,OAAOA,OAAP,MAAoB,cAApB;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AAEA;;;;AAGA,eAAe,MAAMC,cAAN,SAA6BH,OAA7B,CAAqC;AAChD;;;;AAIAI,EAAAA,KAAK,GAAG;AACJ,QAAIC,cAAc,GAAG,IAAIH,kBAAJ,CAAuB,KAAKI,mBAAL,EAAvB,CAArB;AACA,QAAIC,iBAAiB,GAAG,IAAIN,iBAAJ,CACpB,YAAY,KAAKO,IAAL,CAAUC,MAAtB,GAA+B,cADX,CAAxB;AAGAF,IAAAA,iBAAiB,CACZG,YADL,CACkBC,QAAQ,IAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD9B,EAEKE,IAFL,CAEUC,IAAI,IAAI;AACVT,MAAAA,cAAc,CAACU,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,MAAM,KAAKG,YAAL,EAArC;AACH,KAJL;AAKH;;AAf+C","sourcesContent":["// @flow\nimport Service from \"./Service.js\";\nimport SitemapRepository from \"../Repository/SitemapRepository.js\";\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository.js\";\n\n/**\n * This service will extract all the urls from a sitemap or nested sitemaps.\n */\nexport default class SitemapService extends Service {\n    /**\n     * Start the sitemap service to extract the domain urls from the sitemap.\n     * Assumes the sitemap is located at the domain + /sitemap.xml\n     */\n    start() {\n        let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\n        let sitemapRepository = new SitemapRepository(\n            \"http://\" + this.args.domain + \"/sitemap.xml\"\n        );\n        sitemapRepository\n            .findAllPages(progress => this.emitProgress(progress))\n            .then(urls => {\n                urlsRepository.save(urls).then(() => this.emitComplete());\n            });\n    }\n}\n"],"file":"SitemapService.js"}