{"version":3,"sources":["../../src/Service/SitemapService.js"],"names":["SitemapService","Service","start","urlsRepository","JsonUrlsRepository","getPathJsonUrlsFile","sitemapRepository","SitemapRepository","args","domain","findAllPages","progress","emitProgress","then","urls","save","emitComplete"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA;;;AAGe,MAAMA,cAAN,SAA6BC,gBAA7B,CAAqC;AAClD;;;;AAIAC,EAAAA,KAAK,GAAG;AACN,QAAIC,cAAc,GAAG,IAAIC,2BAAJ,CAAuB,KAAKC,mBAAL,EAAvB,CAArB;AACA,QAAIC,iBAAiB,GAAG,IAAIC,0BAAJ,CACtB,YAAY,KAAKC,IAAL,CAAUC,MAAtB,GAA+B,cADT,CAAxB;AAGAH,IAAAA,iBAAiB,CACdI,YADH,CACgBC,QAAQ,IAAI,KAAKC,YAAL,CAAkBD,QAAlB,CAD5B,EAEGE,IAFH,CAEQC,IAAI,IAAI;AACZX,MAAAA,cAAc,CAACY,IAAf,CAAoBD,IAApB,EAA0BD,IAA1B,CAA+B,MAAM,KAAKG,YAAL,EAArC;AACD,KAJH;AAKD;;AAfiD","sourcesContent":["import Service from \"./Service\";\nimport SitemapRepository from \"../Repository/SitemapRepository\";\nimport JsonUrlsRepository from \"../Repository/JsonUrlsRepository\";\n\n/**\n * This service will extract all the urls from a sitemap or nested sitemaps.\n */\nexport default class SitemapService extends Service {\n  /**\n   * Start the sitemap service to extract the domain urls from the sitemap.\n   * Assumes the sitemap is located at the domain + /sitemap.xml\n   */\n  start() {\n    let urlsRepository = new JsonUrlsRepository(this.getPathJsonUrlsFile());\n    let sitemapRepository = new SitemapRepository(\n      \"http://\" + this.args.domain + \"/sitemap.xml\"\n    );\n    sitemapRepository\n      .findAllPages(progress => this.emitProgress(progress))\n      .then(urls => {\n        urlsRepository.save(urls).then(() => this.emitComplete());\n      });\n  }\n}\n"],"file":"SitemapService.js"}